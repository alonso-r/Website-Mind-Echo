<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mind Echo Podcast</title>
  <meta name="description" content="Stories, strategies, and motivations of entrepreneurs shaping industries in Germany and beyond." />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { --brand: #1260e6; }
    .brand { color: var(--brand); }
    .bg-brand { background-color: var(--brand); }
    .ring-brand { --tw-ring-color: var(--brand); }
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
  </style>
</head>
<body class="bg-neutral-50 text-neutral-900">
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-neutral-200">
    <div class="max-w-6xl mx-auto px-4 flex items-center justify-between h-16">
      <a href="#top" class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-xl overflow-hidden bg-white border border-neutral-200"><img src="/logo.png" alt="Mind Echo logo" class="h-full w-full object-contain" /></div>
        <div class="leading-tight">
          <div class="font-semibold">Mind Echo Podcast</div>
          <div class="text-xs text-neutral-500">with Alonso Rondón Tello</div>
        </div>
      </a>
      <nav class="hidden sm:flex items-center gap-6 text-sm">
        <a href="#episodes" class="hover:text-neutral-600">Episodes</a>
        <a href="#listen" class="hover:text-neutral-600">Listen</a>
        <a href="#contact" class="hover:text-neutral-600">Contact</a>
        <a href="#subscribe" class="hover:text-neutral-600">Subscribe</a>
      </nav>
      <a href="#subscribe" class="inline-flex items-center rounded-xl bg-brand text-white px-3 py-2 text-sm font-medium shadow-sm hover:opacity-90 focus:outline-none focus:ring-2 ring-brand">Subscribe</a>
    </div>
  </header>

  <!-- HERO / PLAYER -->
  <section id="listen" class="bg-[var(--brand)] text-white">
    <div class="max-w-6xl mx-auto px-4 py-12 md:py-16 grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h1 class="text-3xl md:text-4xl font-bold tracking-tight">Conversations that echo beyond the moment</h1>
        <p class="mt-4 text-neutral-100">Deep-dive stories with founders, leaders, and innovators in Germany and beyond. New episodes twice a month.</p>
        <div class="mt-6 flex items-center gap-3">
          <a href="#episodes" class="inline-flex items-center rounded-xl bg-white text-neutral-900 px-4 py-2 text-sm font-medium shadow-sm hover:bg-white/90">Browse episodes</a>
          <a href="#contact" class="inline-flex items-center rounded-xl border border-white bg-transparent text-white px-4 py-2 text-sm font-medium hover:bg-white/10">Get in touch</a>
        </div>
      </div>

      <!-- Buzzsprout player auto-sizes; large list view -->
      <div class="rounded-2xl border border-neutral-200 overflow-hidden shadow-sm bg-white">
        <div id="bzplayer" class="w-full"></div>
        <script async src="https://www.buzzsprout.com/2392678.js?container_id=bzplayer&player=large"></script>
      </div>
    </div>
  </section>

  <!-- EPISODES (from RSS via Vercel function) -->
  <section id="episodes" class="border-t border-neutral-200 bg-white">
    <div class="max-w-6xl mx-auto px-4 py-12 md:py-16">
      <div class="flex items-end justify-between gap-6 mb-6">
        <h2 class="text-2xl md:text-3xl font-semibold">Latest Episodes</h2>
        <div class="text-sm text-neutral-500">Powered by your RSS feed</div>
      </div>
      <div id="feed-status" class="hidden mb-6 text-sm"></div>
      <div id="episodes-grid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </div>
  </section>

  <section id="subscribe" class="bg-neutral-900 text-white">
    <div class="max-w-6xl mx-auto px-4 py-12 md:py-16 grid md:grid-cols-2 gap-10 items-center">
      <div>
        <h3 class="text-2xl md:text-3xl font-semibold">Never miss an episode</h3>
        <p class="mt-3 text-neutral-300">Subscribe on your favorite platform or add the RSS feed directly.</p>
      </div>
      <div class="flex flex-wrap items-center gap-3">
        <a href="#" class="inline-flex items-center rounded-xl bg-white text-neutral-900 px-4 py-2 text-sm font-medium hover:bg-neutral-100">Spotify</a>
        <a href="#" class="inline-flex items-center rounded-xl bg-white text-neutral-900 px-4 py-2 text-sm font-medium hover:bg-neutral-100">Apple Podcasts</a>
        <a href="#" class="inline-flex items-center rounded-xl bg-white text-neutral-900 px-4 py-2 text-sm font-medium hover:bg-neutral-100">YouTube</a>
        <a id="rss-link" href="#" class="inline-flex items-center rounded-xl bg-white text-neutral-900 px-4 py-2 text-sm font-medium hover:bg-neutral-100">RSS</a>
      </div>
    </div>
  </section>

  <section id="contact" class="bg-white">
    <div class="max-w-6xl mx-auto px-4 py-12 md:py-16 grid md:grid-cols-2 gap-10">
      <div>
        <h3 class="text-2xl md:text-3xl font-semibold">Contact</h3>
        <p class="mt-3 text-neutral-600">For bookings, partnerships, or feedback, reach out anytime.</p>
        <dl class="mt-6 space-y-3 text-neutral-700">
          <div class="flex gap-3"><dt class="w-24 text-neutral-500">Email</dt><dd><a id="contact-email" class="underline decoration-neutral-300 hover:decoration-transparent" href="mailto:hello@mindecho.example">hello@mindecho.example</a></dd></div>
          <div class="flex gap-3"><dt class="w-24 text-neutral-500">LinkedIn</dt><dd><a id="contact-linkedin" class="underline decoration-neutral-300 hover:decoration-transparent" href="#" target="_blank" rel="noopener">Alonso Rondón Tello</a></dd></div>
          <div class="flex gap-3"><dt class="w-24 text-neutral-500">Instagram</dt><dd><a id="contact-instagram" class="underline decoration-neutral-300 hover:decoration-transparent" href="#" target="_blank" rel="noopener">@mindecho</a></dd></div>
          <div class="flex gap-3"><dt class="w-24 text-neutral-500">YouTube</dt><dd><a id="contact-youtube" class="underline decoration-neutral-300 hover:decoration-transparent" href="#" target="_blank" rel="noopener">Mind Echo Podcast</a></dd></div>
        </dl>
      </div>
      <form id="contact-form" action="https://formspree.io/f/your-id" method="POST" class="bg-neutral-50 border border-neutral-200 rounded-2xl p-6 shadow-sm">
        <div class="grid gap-4">
          <div>
            <label for="name" class="block text-sm font-medium text-neutral-700">Name</label>
            <input id="name" name="name" type="text" required class="mt-1 block w-full rounded-xl border border-neutral-300 bg-white px-3 py-2 focus:outline-none focus:ring-2 ring-brand" />
          </div>
          <div>
            <label for="email" class="block text-sm font-medium text-neutral-700">Email</label>
            <input id="email" name="email" type="email" required class="mt-1 block w-full rounded-xl border border-neutral-300 bg-white px-3 py-2 focus:outline-none focus:ring-2 ring-brand" />
          </div>
          <div>
            <label for="message" class="block text-sm font-medium text-neutral-700">Message</label>
            <textarea id="message" name="message" rows="5" required class="mt-1 block w-full rounded-xl border border-neutral-300 bg-white px-3 py-2 focus:outline-none focus:ring-2 ring-brand"></textarea>
          </div>
          <button type="submit" class="inline-flex justify-center items-center rounded-xl bg-brand text-white px-4 py-2 text-sm font-medium shadow-sm hover:opacity-90">Send</button>
          <p class="text-xs text-neutral-500">This form uses <a class="underline" href="https://formspree.io/" target="_blank" rel="noopener">Formspree</a>. Replace the action with your own endpoint if you prefer.</p>
        </div>
      </form>
    </div>
  </section>

  <footer class="border-t border-neutral-200 bg-white">
    <div class="max-w-6xl mx-auto px-4 py-8 flex flex-col sm:flex-row items-center justify-between gap-4 text-sm text-neutral-600">
      <div>© <span id="year"></span> Mind Echo Podcast</div>
      <div class="flex items-center gap-4">
        <a href="#" class="underline decoration-neutral-300 hover:decoration-transparent">Privacy</a>
        <a href="#" class="underline decoration-neutral-300 hover:decoration-transparent">Imprint</a>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const RSS_FEED_URL = 'https://feeds.buzzsprout.com/2392678.rss';
    document.getElementById('rss-link').href = RSS_FEED_URL;

    const statusEl = document.getElementById('feed-status');
    const gridEl = document.getElementById('episodes-grid');

    async function fetchText(url) {
      const res = await fetch(url);
      if (!res.ok) throw new Error('Network response was not ok');
      return await res.text();
    }

    async function loadFeed() {
      statusEl.classList.add('hidden');
      gridEl.innerHTML = '';

      const endpoint = '/api/rss';
      let xmlText = null;
      try { xmlText = await fetchText(endpoint); } catch (e) {}

      if (!xmlText) {
        statusEl.textContent = 'Could not load RSS feed from /api/rss. Check that your Vercel function exists at /api/rss.js';
        statusEl.className = 'mb-6 text-sm text-red-600';
        statusEl.classList.remove('hidden');
        return;
      }

      const parser = new DOMParser();
      const xml = parser.parseFromString(xmlText, 'application/xml');
      let items = Array.from(xml.querySelectorAll('item'));

      // Hide specific episodes (by title match or GUID)
      const HIDE_TITLES = ['teaser']; // lowercase match; add more strings as needed
      const HIDE_GUIDS = []; // add exact GUID strings to hide specific items

      items = items.filter((item) => {
        const t = (item.querySelector('title')?.textContent || '').toLowerCase();
        const guid = (item.querySelector('guid')?.textContent || '').trim();
        const byTitle = HIDE_TITLES.some(x => x && t.includes(x));
        const byGuid = HIDE_GUIDS.length ? HIDE_GUIDS.includes(guid) : false;
        return !(byTitle || byGuid);
      });

      if (!items.length) {
        statusEl.textContent = 'No episodes to display.';
        statusEl.className = 'mb-6 text-sm text-neutral-600';
        statusEl.classList.remove('hidden');
        return;
      }

      const dateFmt = new Intl.DateTimeFormat(undefined, { year: 'numeric', month: 'short', day: 'numeric' });

      items.slice(0, 30).forEach((item) => {
        const title = item.querySelector('title')?.textContent?.trim() || 'Untitled Episode';
        const link = item.querySelector('link')?.textContent?.trim() || '#';
        const pubDateRaw = item.querySelector('pubDate')?.textContent;
        const pubDate = pubDateRaw ? dateFmt.format(new Date(pubDateRaw)) : '';
        const desc = (item.querySelector('description')?.textContent || item.querySelector('content\\:encoded')?.textContent || '').replace(/<[^>]+>/g, '').trim();
        const enclosure = item.querySelector('enclosure');
        const audioUrl = enclosure?.getAttribute('url') || '';

        const card = document.createElement('article');
        card.className = 'rounded-2xl border border-neutral-200 overflow-hidden bg-white shadow-sm flex flex-col';

        const body = document.createElement('div');
        body.className = 'p-5 flex-1 flex flex-col';
        body.innerHTML = `
          <a href="${link}" target="_blank" rel="noopener" class="block">
            <h3 class="text-lg font-semibold line-clamp-2 hover:underline decoration-neutral-300 hover:decoration-transparent">${title}</h3>
          </a>
          <div class="mt-1 text-xs text-neutral-500">${pubDate}</div>
          <p class="mt-3 text-sm text-neutral-600 line-clamp-4">${desc}</p>
        `;

        const playerWrap = document.createElement('div');
        playerWrap.className = 'p-5 pt-0';
        if (audioUrl) {
          playerWrap.innerHTML = `
            <audio controls preload="none" class="w-full mt-3">
              <source src="${audioUrl}" type="audio/mpeg" />
              Your browser does not support the audio element.
            </audio>
          `;
        } else {
          playerWrap.innerHTML = `<a href="${link}" target="_blank" rel="noopener" class="text-sm underline">Listen on your platform</a>`;
        }

        card.appendChild(body);
        card.appendChild(playerWrap);
        gridEl.appendChild(card);
      });
    }

    loadFeed();

    // Also hide teaser in the Buzzsprout embed player (best-effort)
    (function hideInBuzzsproutPlayer(){
      const container = document.getElementById('bzplayer');
      if (!container) return;
      const HIDE_TITLES = ['teaser']; // must be lowercase
      const matches = (txt) => HIDE_TITLES.some(t => txt.includes(t));
      const scan = () => {
        const all = container.querySelectorAll('*');
        all.forEach(node => {
          const txt = (node.textContent || '').toLowerCase();
          if (matches(txt)) {
            const row = node.closest('li, .episode, .buzzsprout-player-episode, .bsp-episode, .buzzsprout-episode');
            if (row) row.style.display = 'none';
          }
        });
      };
      const obs = new MutationObserver(scan);
      obs.observe(container, { childList: true, subtree: true });
      scan();
    })();

    // Smooth scroll for same-page links
    document.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener('click', (e) => {
        const id = a.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        if (el) { e.preventDefault(); el.scrollIntoView({ behavior: 'smooth' }); }
      });
    });
  </script>
</body>
</html>
